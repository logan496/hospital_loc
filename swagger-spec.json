{
  "openapi": "3.0.0",
  "paths": {
    "/auth/register": {
      "post": {
        "operationId": "AuthController_register",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Utilisateur créé avec succès"
          },
          "409": {
            "description": "Email déjà utilisé"
          }
        },
        "summary": "Inscription d'un nouvel utilisateur",
        "tags": [
          "Authentification"
        ]
      }
    },
    "/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Connexion réussie"
          },
          "401": {
            "description": "Identifiants invalides"
          }
        },
        "summary": "Connexion d'un utilisateur",
        "tags": [
          "Authentification"
        ]
      }
    },
    "/hospitals": {
      "get": {
        "operationId": "HospitalsController_search",
        "parameters": [
          {
            "name": "latitude",
            "required": true,
            "in": "query",
            "description": "Latitude de la position de l'utilisateur",
            "schema": {
              "example": 4.05,
              "type": "number"
            }
          },
          {
            "name": "longitude",
            "required": true,
            "in": "query",
            "description": "Longitude de la position de l'utilisateur",
            "schema": {
              "example": 9.7,
              "type": "number"
            }
          },
          {
            "name": "radius",
            "required": false,
            "in": "query",
            "description": "Rayon de recherche en km (par défaut: 10)",
            "schema": {
              "default": 10,
              "example": 10,
              "type": "number"
            }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "description": "Type d'établissement",
            "schema": {
              "type": "string",
              "enum": [
                "hospital",
                "clinic",
                "center"
              ]
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Numéro de page",
            "schema": {
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Nombre de résultats par page",
            "schema": {
              "default": 20,
              "example": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Liste des hôpitaux trouvés"
          }
        },
        "summary": "Rechercher des hôpitaux à proximité",
        "tags": [
          "Hôpitaux"
        ]
      }
    },
    "/hospitals/{id}": {
      "get": {
        "operationId": "HospitalsController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID de l'hôpital",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Détails de l'hôpital"
          },
          "404": {
            "description": "Hôpital non trouvé"
          }
        },
        "summary": "Obtenir les détails d'un hôpital",
        "tags": [
          "Hôpitaux"
        ]
      }
    },
    "/hospitals/{id}/services": {
      "get": {
        "operationId": "HospitalsController_getServices",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID de l'hôpital",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Liste des services"
          },
          "404": {
            "description": "Hôpital non trouvé"
          }
        },
        "summary": "Obtenir les services d'un hôpital",
        "tags": [
          "Hôpitaux"
        ]
      }
    },
    "/ratings": {
      "post": {
        "operationId": "RatingsController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRatingDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Évaluation créée avec succès"
          },
          "401": {
            "description": "Non authentifié"
          },
          "404": {
            "description": "Service non trouvé"
          },
          "409": {
            "description": "Vous avez déjà noté ce service"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Créer une évaluation pour un service",
        "tags": [
          "Évaluations"
        ]
      }
    },
    "/ratings/{id}": {
      "put": {
        "operationId": "RatingsController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID de l'évaluation",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRatingDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Évaluation modifiée avec succès"
          },
          "401": {
            "description": "Non authentifié"
          },
          "403": {
            "description": "Vous ne pouvez modifier que vos propres évaluations"
          },
          "404": {
            "description": "Évaluation non trouvée"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Modifier sa propre évaluation",
        "tags": [
          "Évaluations"
        ]
      },
      "delete": {
        "operationId": "RatingsController_delete",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID de l'évaluation",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Évaluation supprimée avec succès"
          },
          "401": {
            "description": "Non authentifié"
          },
          "403": {
            "description": "Vous ne pouvez supprimer que vos propres évaluations"
          },
          "404": {
            "description": "Évaluation non trouvée"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Supprimer sa propre évaluation",
        "tags": [
          "Évaluations"
        ]
      }
    },
    "/ratings/service/{serviceId}": {
      "get": {
        "operationId": "RatingsController_findByService",
        "parameters": [
          {
            "name": "serviceId",
            "required": true,
            "in": "path",
            "description": "ID du service",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Liste des évaluations"
          }
        },
        "summary": "Obtenir les évaluations d'un service",
        "tags": [
          "Évaluations"
        ]
      }
    }
  },
  "info": {
    "title": "API Plateforme Hôpitaux",
    "description": "API pour répertorier les hôpitaux, leurs services et permettre aux utilisateurs de les noter",
    "version": "1.0",
    "contact": {}
  },
  "tags": [
    {
      "name": "Authentification",
      "description": "Endpoints pour l'inscription et la connexion"
    },
    {
      "name": "Hôpitaux",
      "description": "Endpoints pour rechercher et consulter les hôpitaux"
    },
    {
      "name": "Évaluations",
      "description": "Endpoints pour créer, modifier et consulter les évaluations"
    }
  ],
  "servers": [],
  "components": {
    "securitySchemes": {
      "jwt": {
        "scheme": "bearer",
        "bearerFormat": "jwt",
        "type": "http",
        "description": "Entrez votre token JWT"
      }
    },
    "schemas": {
      "RegisterDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "user@example.com",
            "description": "Email de l'utilisateur"
          },
          "password": {
            "type": "string",
            "example": "Password123!",
            "description": "Mot de passe (min 8 caractères)",
            "minLength": 8
          },
          "firstName": {
            "type": "string",
            "example": "Jean",
            "description": "Prénom de l'utilisateur"
          },
          "lastName": {
            "type": "string",
            "example": "Dupont",
            "description": "Nom de famille de l'utilisateur"
          }
        },
        "required": [
          "email",
          "password",
          "firstName",
          "lastName"
        ]
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "user@example.com",
            "description": "Email de l'utilisateur"
          },
          "password": {
            "type": "string",
            "example": "Password123!",
            "description": "Mot de passe"
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "CreateRatingDto": {
        "type": "object",
        "properties": {
          "serviceId": {
            "type": "string",
            "example": "650e8400-e29b-41d4-a716-446655440001",
            "description": "ID du service à noter"
          },
          "rating": {
            "type": "number",
            "example": 5,
            "description": "Note de 1 à 5",
            "minimum": 1,
            "maximum": 5
          },
          "comment": {
            "type": "string",
            "example": "Excellent service, personnel très compétent",
            "description": "Commentaire optionnel"
          }
        },
        "required": [
          "serviceId",
          "rating"
        ]
      },
      "UpdateRatingDto": {
        "type": "object",
        "properties": {
          "rating": {
            "type": "number",
            "example": 4,
            "description": "Nouvelle note de 1 à 5",
            "minimum": 1,
            "maximum": 5
          },
          "comment": {
            "type": "string",
            "example": "Mise à jour de mon commentaire",
            "description": "Nouveau commentaire"
          }
        }
      }
    }
  }
}